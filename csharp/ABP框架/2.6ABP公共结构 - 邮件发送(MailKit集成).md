# 邮件发送(MailKit集成)

## 目录

<!-- TOC -->

- [邮件发送(MailKit集成)](#%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81mailkit%E9%9B%86%E6%88%90)
    - [目录](#%E7%9B%AE%E5%BD%95)
    - [简介](#%E7%AE%80%E4%BB%8B)
    - [IEmailSender](#iemailsender)
    - [MailKit 集成](#mailkit-%E9%9B%86%E6%88%90)
        - [安装](#%E5%AE%89%E8%A3%85)
        - [集成](#%E9%9B%86%E6%88%90)

<!-- /TOC -->

## 简介

邮件是一个基础设施,譬如使用邮箱做登录账号时,校验邮箱.修改密码时候发送重置密码邮件.

## IEmailSender

IEmailSender 是一个邮件发送服务接口，使用它你不需要知道详细信息就可以简单的发送邮件。

```c#
public class TaskManager : IDomainService
{
    private readonly IEmailSender _emailSender;

    public TaskManager(IEmailSender emailSender)
    {
        _emailSender = emailSender;
    }

    public void Assign(Task task, Person person)
    {
        //分配任务给某个人
        task.AssignedTo = person;

        //发送一份邮件通知
        _emailSender.Send(
            to: person.EmailAddress,
            subject: "You have a new task!",
            body: $"A new task is assigned for you: <b>{task.Title}</b>",
            isBodyHtml: true
        );
    }
}
```

## MailKit 集成

由于Core没有Email的基础操作类,所以我们需要使用第三方插件来发送邮件Abp使用 Abp.MailKit 来集成邮件发送功能。

### 安装

```powershell
Install-Package Abp.MailKit
```

也可以在nuget管理器里安装.

### 集成

将AbpMailKitModule添加到模块的依赖项中

```C#
[DependsOn(typeof(AbpMailKitModule))]
public class MyProjectModule : AbpModule
{
    //...
}
```
